---
title: reivew_http
abbrlink: 2737761933
date: 2018-02-01 22:50:03
tags:
categories:
---
http://www.ruanyifeng.com/blog/2016/08/http.html

# 架构
## 2.1客户端/服务器消息
HTTP是无状态请求/响应协议，通过在可靠的传输层或会话层的connection上交换消息。
任何发起请求的客户端程序，包括（但不限于）浏览器，爬虫（网络机器人），命令行工具，定制应用和移动应用
## 2.2多样的实现
常见的HTTP用户代理包括多种形状和大小的家用电器，音响，音阶，固件更新脚本，命令行程序，移动应用程序和通信设备。
同样，常见的HTTP源服务器包括家庭自动化设备，可配置网络组件，办公设备，自动机器人，新闻源，交通摄像头，广告选择器和视频传送平台。
## 2.3中介
HTTP使中介可以通过一系列连接来满足请求。有三种常见的的HTTP中介形式：
- 代理、
- 网关和
- 隧道。
在一些情况下，一个独立的中介可能根据每个请求的性质扮演一个源服务器、代理、网关或隧道。
```
    >             >             >             >
UA =========== A =========== B =========== C =========== O
           <             <             <             <
```

“代理”是由客户端通常通过本地配置规则选择的消息转发代理，用于接收某些类型的绝对URI的请求，并尝试通过HTTP接口翻译来满足这些请求。一些翻译是最小的，例如对于“http”URI的代理请求，而其他请求可能需要翻译来自完全不同的应用层协议。代理通常被用于以一个公共的中介聚合一个团体的HTTP请求以达到安全、注解服务或共享缓存。一些代理被设计成在转发时将选择的消息或有效载荷进行转换，如5.7.2节所述。
“网关”（又名“反向代理”）是一种扮演一个出站连接的源服务器但转换收到的请求并转发他们入站到其他服务器或服务器组。网关通常用于封装传统或不可信的信息服务，通过“加速器”缓存提高服务器性能，并启用跨多台机器的HTTP服务分区或负载平衡。所有应用于源服务器的HTTP要求也应用于出站通讯的网关。网关使用任何它想要的协议与入站服务器进行通信，包括HTTP规范之外的私有扩展。但是，希望与第三方HTTP服务器进行互操作的HTTP-to-HTTP网关应符合网关入站连接上的用户代理要求。
“隧道”充当两个连接的盲中继器而不改变消息。一旦激活隧道不被认为是HTTP通讯的一方，虽然隧道已经被HTTP请求建立。当一个隧道两段的连接被关闭时它就不再存在了。隧道用于通过一个中介来扩展一个虚拟的连接，例如当传输层安全（TLS，RFC5246）协议被用于建立机密会话以通过共享防火墙代理。

## 2.4缓存


一个“缓存”是一个先前的响应消息的本地存储和控制他的消息的存储、恢复和删除的子系统。一个缓存存储可缓存的响应以减少响应时间以及未来对相同请求的网络带宽的使用。任何的客户端或者服务器可以使用缓存，虽然一个服务器在充当隧道的时候不能使用缓存。
一个缓存的影响是，如果链中的其中一个参与者有一份缓存应用于请求，这将缩短请求、响应的链的长度。下面说明了如果B有一个缓存的拷贝，它是先前没有被UA或A缓存的请求从O（经过C）处获得的响应。
```
     >             >
UA =========== A =========== B - - - - - - C - - - - - - O
           <             <
```
如果允许缓存存储响应消息的副本以用于回答后续请求，则响应是“可缓存的”。即使响应是可缓存的，当缓存的响应可用于特定请求时，客户端或源服务器也可能存在额外的约束。

在万维网和大型组织内部署了各种各样的架构和缓存配置。 这些包括用于保存跨海带宽的国家级缓存代理，广播或组播高速缓存条目的协作系统，用于离线或高延迟环境的预取缓存条目的归档等等。

## 2.5一致性和错误处理??

## 2.6协议版本

## 2,7统一资源标识符URI

# 3.消息格式
# 4.传输编码
# 5.消息路由
# 6.连接管理!!!


# 状态码
https://tools.ietf.org/html/rfc2616#section-2.1
```
   10.1  Informational 1xx ...........................................57
   10.1.1   100 Continue .............................................58
   10.1.2   101 Switching Protocols ..................................58
   10.2  Successful 2xx ..............................................58
   10.2.1   200 OK ...................................................58
   10.2.2   201 Created ..............................................59
   10.2.3   202 Accepted .............................................59
   10.2.4   203 Non-Authoritative Information ........................59
   10.2.5   204 No Content ...........................................60
   10.2.6   205 Reset Content ........................................60
   10.2.7   206 Partial Content ......................................60
   10.3  Redirection 3xx .............................................61
   10.3.1   300 Multiple Choices .....................................61
   10.3.2   301 Moved Permanently ....................................62
   10.3.3   302 Found ................................................62
   10.3.4   303 See Other ............................................63
   10.3.5   304 Not Modified .........................................63
   10.3.6   305 Use Proxy ............................................64
   10.3.7   306 (Unused) .............................................64
   10.3.8   307 Temporary Redirect ...................................65
   10.4  Client Error 4xx ............................................65
   10.4.1    400 Bad Request .........................................65
   10.4.2    401 Unauthorized ........................................66
   10.4.3    402 Payment Required ....................................66
   10.4.4    403 Forbidden ...........................................66
   10.4.5    404 Not Found ...........................................66
   10.4.6    405 Method Not Allowed ..................................66
   10.4.7    406 Not Acceptable ......................................67
   10.4.8    407 Proxy Authentication Required .......................67
   10.4.9    408 Request Timeout .....................................67
   10.4.10   409 Conflict ............................................67
   10.4.11   410 Gone ................................................68
   10.4.12   411 Length Required .....................................68
   10.4.13   412 Precondition Failed .................................68
   10.4.14   413 Request Entity Too Large ............................69
   10.4.15   414 Request-URI Too Long ................................69
   10.4.16   415 Unsupported Media Type ..............................69
   10.4.17   416 Requested Range Not Satisfiable .....................69
   10.4.18   417 Expectation Failed ..................................70
   10.5  Server Error 5xx ............................................70
   10.5.1   500 Internal Server Error ................................70
   10.5.2   501 Not Implemented ......................................70
   10.5.3   502 Bad Gateway ..........................................70
   10.5.4   503 Service Unavailable ..................................70
   10.5.5   504 Gateway Timeout ......................................71
   10.5.6   505 HTTP Version Not Supported ...........................71
```


# github翻译的部分文档
https://github.com/pearzl/HTTP11_chinese